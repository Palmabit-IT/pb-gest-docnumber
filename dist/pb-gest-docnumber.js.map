{"version":3,"sources":["pb-gest-docnumber.js"],"names":[],"mappings":";AACA,YAAY,CAAC;;;;;;IAEP,WAAW;WAAX,WAAW;0BAAX,WAAW;;;eAAX,WAAW;;wBACJ,OAAO,EAAE,MAAM,EAAE;AAC1B,UAAI,CAAC,OAAO,EAAE;AACZ,eAAO,CAAC,CAAC;OACV;;AAED,UAAI,OAAO,OAAO,CAAC,WAAW,KAAK,QAAQ,IAAI,OAAO,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;AAC7E,eAAO,IAAI,CAAC;OACb;;AAED,UAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;AACnC,eAAO,CAAC,CAAC;OACV;;AAED,WAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;AAClD,YAAI,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE;AACtC,iBAAO,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;SACjD;OACF;;AAED,aAAO,CAAC,CAAC;KACV;;;4BAEc,OAAO,EAAE,MAAM,EAAE;AAC9B,UAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AACxC,aAAO,OAAO,KAAK,IAAI,GAAG,IAAI,GAAI,OAAO,GAAG,CAAC,AAAC,CAAC;KAChD;;;SA1BG,WAAW;;;AA6BjB,OAAO,CAAC,MAAM,CAAC,iBAAiB,EAAE,EAAE,CAAC,CAElC,OAAO,CAAC,iBAAiB,EAAE,YAAY;AACtC,SAAO;AACL,OAAG,EAAE,WAAW,CAAC,GAAG;AACpB,WAAO,EAAE,WAAW,CAAC,OAAO;GAC7B,CAAA;CACF,CAAC,CAAC","file":"pb-gest-docnumber.js","sourcesContent":["/*! pb-gest-docnumber 0.1.0 - Copyright 2015 Palmabit <hello@palmabit.com> (http://www.palmabit.com/) */\n'use strict';\n\nclass PbDocNumber {\n  static get(doctype, userId) {\n    if (!doctype) {\n      return 0;\n    }\n\n    if (typeof doctype.classNumber === 'string' && doctype.classNumber.length > 0) {\n      return null;\n    }\n\n    if (!Array.isArray(doctype.counter)) {\n      return 0;\n    }\n\n    for (let i = 0; i < doctype.counter.length; i += 1) {\n      if (doctype.counter[i].user === userId) {\n        return parseInt(doctype.counter[i].number || 0);\n      }\n    }\n\n    return 0;\n  }\n\n  static getNext(doctype, userId) {\n    var current = this.get(doctype, userId);\n    return current === null ? null : (current + 1);\n  }\n}\n\nangular.module('pbGestDocNumber', [])\n\n  .factory('PbGestDocNumber', function () {\n    return {\n      get: PbDocNumber.get,\n      getNext: PbDocNumber.getNext\n    }\n  });\n"]}